<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SyncBeats â€” Room</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="/css/style.css">
</head>

<body class="room-page">
    <!-- Animated background -->
    <div class="bg-animation">
        <div class="orb orb-1"></div>
        <div class="orb orb-2"></div>
        <div class="orb orb-3"></div>
    </div>

    <!-- Top Bar -->
    <header class="room-header glass-card">
        <a href="/" class="back-link">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M19 12H5M12 19l-7-7 7-7" />
            </svg>
        </a>
        <div class="room-info">
            <h1 class="room-title">Sync<span class="gradient-text">Beats</span></h1>
            <div class="room-code-display">
                Room: <span id="room-code-text"></span>
                <button id="copy-code-btn" class="icon-btn" title="Copy room code">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="9" y="9" width="13" height="13" rx="2" />
                        <path d="M5 15V5a2 2 0 012-2h10" />
                    </svg>
                </button>
                <button id="share-btn" class="icon-btn" title="Share room link">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="18" cy="5" r="3" />
                        <circle cx="6" cy="12" r="3" />
                        <circle cx="18" cy="19" r="3" />
                        <line x1="8.59" y1="13.51" x2="15.42" y2="17.49" />
                        <line x1="15.41" y1="6.51" x2="8.59" y2="10.49" />
                    </svg>
                </button>
            </div>
        </div>
        <div class="room-users">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2" />
                <circle cx="9" cy="7" r="4" />
                <path d="M23 21v-2a4 4 0 00-3-3.87M16 3.13a4 4 0 010 7.75" />
            </svg>
            <span id="user-count">1</span>
        </div>
    </header>

    <!-- Main Content -->
    <div class="room-layout">
        <!-- Player Section -->
        <section class="player-section">
            <div class="player-wrapper glass-card">
                <div id="youtube-player-container">
                    <div id="youtube-player"></div>
                    <div id="player-placeholder" class="player-placeholder">
                        <div class="placeholder-content">
                            <svg viewBox="0 0 80 80" fill="none" xmlns="http://www.w3.org/2000/svg" width="80"
                                height="80">
                                <circle cx="40" cy="40" r="38" stroke="url(#pg)" stroke-width="2" fill="none"
                                    opacity="0.3" />
                                <path d="M30 22 L58 40 L30 58 Z" fill="url(#pg)" opacity="0.6" />
                                <defs>
                                    <linearGradient id="pg" x1="0" y1="0" x2="80" y2="80">
                                        <stop offset="0%" stop-color="#a855f7" />
                                        <stop offset="100%" stop-color="#06b6d4" />
                                    </linearGradient>
                                </defs>
                            </svg>
                            <p>Add a YouTube URL below to start listening</p>
                        </div>
                    </div>
                </div>

                <!-- Now Playing Info -->
                <div class="now-playing" id="now-playing">
                    <div class="now-playing-info">
                        <span class="np-label">Now Playing</span>
                        <span class="np-title" id="now-playing-title">Nothing playing</span>
                    </div>
                    <div class="player-controls">
                        <button id="prev-btn" class="control-btn" title="Previous">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M6 6h2v12H6zm3.5 6l8.5 6V6z" />
                            </svg>
                        </button>
                        <button id="play-pause-btn" class="control-btn control-btn-main" title="Play/Pause">
                            <svg id="play-icon" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M8 5v14l11-7z" />
                            </svg>
                            <svg id="pause-icon" viewBox="0 0 24 24" fill="currentColor" class="hidden">
                                <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z" />
                            </svg>
                        </button>
                        <button id="next-btn" class="control-btn" title="Next">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z" />
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Add Song â€” search or paste URL -->
                <div class="add-song-bar">
                    <div class="search-container">
                        <input type="text" id="youtube-url-input" placeholder="Search YouTube or paste a URL..."
                            autocomplete="off">
                        <div class="search-results hidden" id="search-results"></div>
                    </div>
                    <button id="add-song-btn" class="btn btn-primary btn-sm">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 5v14M5 12h14" />
                        </svg>
                        <span>Add</span>
                    </button>
                </div>
            </div>
        </section>

        <!-- Sidebar -->
        <aside class="sidebar">
            <!-- Tab Switcher -->
            <div class="sidebar-tabs glass-card">
                <button class="tab-btn active" data-tab="queue">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M8 6h13M8 12h13M8 18h13M3 6h.01M3 12h.01M3 18h.01" />
                    </svg>
                    Queue
                </button>
                <button class="tab-btn" data-tab="chat">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z" />
                    </svg>
                    Chat
                    <span class="chat-badge hidden" id="chat-badge">0</span>
                </button>
                <button class="tab-btn" data-tab="users">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2" />
                        <circle cx="9" cy="7" r="4" />
                    </svg>
                    People
                </button>
            </div>

            <!-- Queue Panel -->
            <div class="sidebar-panel glass-card" id="queue-panel">
                <div class="panel-header">
                    <h3>Up Next</h3>
                    <div class="panel-header-actions">
                        <span class="queue-count" id="queue-count">0 songs</span>
                        <button id="save-playlist-btn" class="icon-btn" title="Save playlist">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z" />
                                <polyline points="17 21 17 13 7 13 7 21" />
                                <polyline points="7 3 7 8 15 8" />
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="queue-list" id="queue-list">
                    <div class="empty-state">
                        <p>ðŸŽµ Queue is empty</p>
                        <p class="empty-hint">Add a YouTube URL to get started</p>
                    </div>
                </div>
            </div>

            <!-- Chat Panel -->
            <div class="sidebar-panel glass-card hidden" id="chat-panel">
                <div class="chat-messages" id="chat-messages">
                    <div class="empty-state">
                        <p>ðŸ’¬ No messages yet</p>
                        <p class="empty-hint">Say hello to your friend!</p>
                    </div>
                </div>
                <div class="chat-input-bar">
                    <input type="text" id="chat-input" placeholder="Type a message..." maxlength="500"
                        autocomplete="off">
                    <button id="send-chat-btn" class="icon-btn">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z" />
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Users Panel -->
            <div class="sidebar-panel glass-card hidden" id="users-panel">
                <div class="panel-header">
                    <h3>In This Room</h3>
                </div>
                <ul class="user-list" id="user-list"></ul>
            </div>
        </aside>
    </div>

    <!-- Toast notifications -->
    <div id="toast-container" class="toast-container"></div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="/js/room.js"></script>
</body>

</html>